box: markadams/chromium-xvfb-js
build:
  steps:
    - npm-install
    - script:
        name: node dependencies
        code: |
          npm install -g bower surge
    - script:
        name: bower install
        code: |
          ./node_modules/bower/bin/bower install --allow-root --config.interactive=false
    - script:
        name: gulp install
        code: |
          npm install -g gulp-cli && gulp
    - script:
        name: npm test
        code: |
          xvfb-run npm test
deploy:
  steps:
    - alrayyes/surge-deploy:
        login: 'hplustime@gmail.com'
        directory: "public"
        token: $SURGE_TOKEN
        domain: "hplustime.com"
