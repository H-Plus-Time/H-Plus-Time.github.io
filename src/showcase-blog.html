<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/marked-element/marked-element.html">
<link rel="import" href="../bower_components/iron-list/iron-list.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="blog-post.html" />

<dom-module id="showcase-blog">
  <template>
    <style>
      :host {
        display:block;
        /*background:white;*/
        max-width:960px;
        margin:auto;
        /*height:100%;*/
      }
      .blog-container {
        position:relative;
        width:100%;
        /*height:100%;*/
      }
      iron-list {
        /*height:100%;*/
      }
    </style>
    <iron-ajax auto
      url="blogcontent.hplustime.com/sitemap.json"
      handle-as="json"
      last-response="{{urls}}">
    </iron-ajax>
    <div class="blog-container">
      <template is="dom-repeat" items="[[_filteredUrls(urls)]]">
          <blog-post prefix="blog" url="[[item]]"></blog-post>
      </template>
    </div>
  </template>
  <script>
    Polymer({
      is: 'showcase-blog',
      _filteredUrls(urls) {
        console.log(urls);
        return urls;
        // return urls.filter((url) => (
        //   ["file-list", "wercker.yml", "README.md"].indexOf(url) == -1
        // ))
      },
      attached() {
        // setTimeout(function() {this.$$('iron-list').resize();}.bind(this), 1000);
      }
    });
  </script>
</dom-module>
